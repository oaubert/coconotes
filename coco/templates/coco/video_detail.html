{% extends "base.html" %}

{% load i18n %}
{% load staticfiles %}
{% load admin_urls %}


{% block extra_head %}
<link rel="stylesheet" href="{% static "libs/jquery.touchsplitter.css" %}">
{% endblock %}

{% block extrajs %}
<script type="text/javascript">
    var metadata = {
        video_url: "{{video.url}}",
        video_id: "{{video.uuid}}",
        url: "/video/{{video.uuid}}/cinelab",
        format: 'ldt',
        lang: "{% get_current_language as language %}",
        is_admin: {% if user.is_staff %}true{% else %}false{% endif %},
        has_slides: {% if video.has_slides %}true{% else %}false{% endif %}
    };
</script>
<script type="text/javascript" src="{% static "metadataplayer/LdtPlayer-core.js" %}"></script>
<script type="text/javascript" src="{% static "js/jquery.min.js" %}"></script>
<script type="text/javascript" src="{% static "js/jquery-ui.min.js" %}"></script>
<script type="text/javascript" src="{% static "libs/jquery.touchsplitter.js" %}"></script>
<script type="text/javascript" src="{% static "js/js.cookie.js" %}"></script>
<script type="text/javascript" src="{% static "js/coco.js" %}"></script>
{% endblock %}

{% block title %}COCo platform - {{ video.title }}{% endblock %}

{% block content %}
<div class="player">
  <div class="titleblock">
    <div class="breadcrumb">
      <span class="channelcategory">{{ video.channel.category }}</span>
      <span class="channeltitle">{{ video.channel.title }}</span>
    </div>
    <div class="playertitle">
      <span class="videotitle">{{ video.title }}</span>
      <div class="videodetails">i</div>
      {% if user.is_staff %}<div class="adminactions"><a href="{{ video.edit_url }}" class="editelement">&#x270f;</a></div>{% endif %}
    </div>
  </div>
  <div class="videoplayer">
    <div class="aspectratiokeeper">
      <div id="VideoContainer" class="VideoContainer"></div>
    </div>
  </div>
  <div class="controlscontainer" id="ControlsContainer">
    <div id="SlidePreviewContainer" class="slidepreview"></div>
    <div id="BarSliderContainer"></div>
    <div id="VideoControlContainer" class="videocontrols"></div>
    <div id="MiscControlsContainer"></div>
  </div>
</div>
<div class="coco_rightcolumn">
  <div id="metadata" class="tabcomponent">
    <ul class="tabnames">
      <li class="tab-plan">{% trans "Plan" %}</li>
      <li class="tab-mynotes selected">{% trans "Own notes" %}</li>
      {% for g in groups %}
      <li class="tab-group-{{g.id}}" data-group-id="{{g.id}}" data-group-name="{{g.name}}">{% trans "Group" %} {{ g.name }}</li>
      {% endfor %}
      <li class="tab-public">{% trans "Public notes" %}</li>
    </ul>
    <div class="coco_tabcontents">
      <div class="tabcontent tab-plan">
        <div id="PlanContainer" class="EnrichedPlanContainer"></div>
      </div>
      <div class="tabcontent selected tab-mynotes">
        <div id="OwnAnnotationsContainer" class="EnrichedPlanContainer"></div>
      </div>
      {% for g in groups %}
      <div class="tabcontent tab-group-{{g.id}}">
        <div id="Group{{g.id}}AnnotationsContainer" class="EnrichedPlanContainer"></div>
      </div>
      {% endfor %}
      <div class="tabcontent tab-public">
        <div id="PublicAnnotationsContainer" class="EnrichedPlanContainer"></div>
      </div>
    </div>
  </div>   <!-- #metadata -->
  <div class="{% if not user.is_authenticated %}inactive_input{% endif %}" id="coco_annotation_input_widget">
    <div class="unauthenticated_comment">{% blocktrans with currenturl=request.path_info %}Please <a href="/accounts/login/?next={{ currenturl }}">log in</a> to be able to comment on the video.{% endblocktrans %}</div>
  </div>
</div>

{% endblock %}
